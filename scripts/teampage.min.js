window.onload=function(){getPlayCalls(),document.getElementById("makeTradeCont")&&(document.getElementById("makeTradeCont").style.height=`${window.innerHeight}px`),teamAbbr=document.getElementById("roster").getAttribute("data-team");var e=document.getElementsByClassName("teamPlayerRow");for(let t of e){let e=t.getAttribute("data-i");teamRoster[e]={},teamRoster[e].fName=t.getAttribute("data-fname"),teamRoster[e].lName=t.getAttribute("data-lname"),teamRoster[e].num=t.getAttribute("data-num"),teamRoster[e].pos=t.getAttribute("data-pos")}for(let e of document.getElementsByClassName("makeTradeSelTeam"))for(let t in teamRoster)if(player=teamRoster[t],"FLX"!=player.pos){let t=document.createElement("option");t.text=`${player.fName} ${player.lName} (${player.pos}, #${player.num})`,t.value=player.num,t.setAttribute("data-pos",player.pos),e.add(t)}},ws.onopen=(()=>{let e={method:"connectAsTeam",token:getCookie("token")};ws.send(JSON.stringify(e))});var temp,otherAbbr,teamAbbr,otherRoster,playCalls=[];playCalls[0]=[.5,.5,.5,.5],playCalls[1]=[.5,.5,.5,.5];var teamRoster={},tradeRows=0,dealViable=!1,counteredDeal=!1,counterOther=!1;function error(e){let t=document.getElementById("errorCont");t.style.display="flex",t.children[0].textContent=e,setTimeout(function(){t.style.display="none"},3e3)}function getPlayCalls(){var e=document.getElementsByClassName("sliderCont"),t=0;for(let a of e){let e=a.children[1];playCalls[Math.floor(t/4)][t%4]=Number((e.value/100).toFixed(2)),t++}}function checkPlayCalls(e){document.getElementsByClassName("saveBtn")[e].textContent="Save Changes",checkIfSame(e)?document.getElementsByClassName("saveBtn")[e].classList.add("disabled"):document.getElementsByClassName("saveBtn")[e].classList.remove("disabled")}function checkIfSame(e){var t=document.getElementsByClassName("sliderCont");for(let a=4*e;a<4*e+4;a++){let l=t[a].children[1],n=Number((l.value/100).toFixed(2));if(playCalls[e][a%4]!==n)return!1}return!0}function changePage(e){var t=document.getElementsByClassName("parent");for(let e of t)e.style.display="none";t[e].style.display="block";var a=document.getElementsByClassName("navBtn");for(let e of a)e.style.textDecoration="none";a[e].style.textDecoration="underline"}function getRoster(){ws.send(JSON.stringify({method:"request",type:"roster",crit:document.getElementById("rosterSel").value}))}function renderOppoRoster(e,t){if(document.getElementById("proposeTrade")&&document.getElementById("proposeTrade").classList.remove("disabled"),0==counteredDeal)for(row of document.getElementsByClassName("makeTradeRow"))row.style.display="none";tradeRows=0,document.getElementById("addMorePlayers").classList.remove("disabled"),document.getElementById("addMorePlayers").title="",document.getElementById("pill").style.display="none",otherRoster=e;let a=0;for(let e of document.getElementsByClassName("makeTradeSelOther")){for(;e.children.length>1;)e.removeChild(e.lastChild);for(let t in otherRoster)if(player=otherRoster[t],"FLX"!=player.pos){let t=document.createElement("option");t.text=`${player.fName} ${player.lName} (${player.pos}, #${player.num})`,t.value=player.num,t.setAttribute("data-pos",player.pos),e.add(t)}0!=counterOther&&counterOther[a]&&(e.value=counterOther[a].num),a++}if(0==counteredDeal)for(let e of document.getElementsByClassName("makeTradeSel"))for(let t of e.children)t.selected=!1;otherAbbr=t;var l=document.getElementById("rosterHalfOppo");l.className="";var n=getTeamFromAbbr(t);l.classList.add(getClassFromTeam(n)),document.getElementById("rosterOppo").children[0].textContent=n.mascot,document.getElementById("rosterOppo").children[1].src=getLogoFromTeam(n),renderPlayerRows(e,l)}function renderPlayerRows(e,t,a){for(;t.children.length>1;)t.removeChild(t.lastChild);let l={qb:[{a:"acc",l:'<abbr title="Accuracy">Acc.</abbr>'},{a:"longAcc",l:'<abbr title="Accuracy Rate Over 20 Yards">Long Acc.</abbr>'},{a:"press",l:'<abbr title="Pressure">Press.</abbr>'}],rb:[{a:"yac",l:'<abbr title="Yards After Contact">YAC</abbr>'},{a:"elus",l:'<abbr title="Elusiveness">Elus.</abbr>'},{a:"speed",l:"Speed"}],wr:[{a:"recep",l:'<abbr title="Reception Rate">Recep.</abbr>'},{a:"longRecep",l:'<abbr title="Reception Rate Over 20 Yards">Long Recep.</abbr>'},{a:"speed",l:"Speed"}],te:[{a:"recep",l:'<abbr title="Reception Rate">Recep.</abbr>'},{a:"block",l:"Block"},{a:"speed",l:"Speed"}],de:[{a:"pressPerc",l:'<abbr title="Pressure Percentage">Press. Perc.</abbr>'},{a:"sack",l:"Sack"},{a:"speed",l:"Speed"}],lb:[{a:"pressPerc",l:'<abbr title="Pressure Percentage">Press. Perc.</abbr>'},{a:"sack",l:"Sack"},{a:"speed",l:"Speed"}],cb:[{a:"cover",l:"Cover"},{a:"int",l:'<abbr title="Interception">Int.</abbr>'},{a:"speed",l:"Speed"}],s:[{a:"cover",l:"Cover"},{a:"int",l:'<abbr title="Interception">Int.</abbr>'},{a:"speed",l:"Speed"}],k:[{a:"pat",l:"PAT"},{a:"fg",l:"FG"},{a:"longFg",l:"Long FG"}],p:[{a:"dist",l:'<abbr title="Punt Distance">Dist.</abbr>'},{a:"aware",l:'<abbr title="Awareness">Aware.</abbr>'},{a:"block",l:"Blocked"}],flx1:[],flx2:[],flx3:[]};var n=["flx1","flx2","flx3"];for(let o in e){"flx1"==o&&buildElem("DIV","playerFlexHead","Flex Spots (Practice Squad)",t);let s=e[o],r=buildElem("DIV","playerRow",void 0,t);r.classList.add("rosterRow"),buildElem("DIV","playerPos",s.pos,r);let d=buildElem("DIV","playerCont",void 0,r),i=buildElem("DIV","playerName",void 0,d);s.num?i.innerHTML=`${s.fName} ${s.lName} <span class="playerNum">#${s.num}</span>`:i.innerHTML=`${s.fName} ${s.lName}`;let m=buildElem("DIV","playerStat",void 0,d),c=[];if(s.num){if(c[0]=`${l[s.pos.toLowerCase()][0].l}: ${JSON.parse(s.statA).m} (${JSON.parse(s.statA).s})`,c[1]=`${l[s.pos.toLowerCase()][1].l}: ${JSON.parse(s.statB).m} (${JSON.parse(s.statB).s})`,c[2]=`${l[s.pos.toLowerCase()][2].l}: ${JSON.parse(s.statC).m} (${JSON.parse(s.statC).s})`,m.innerHTML=`${c[0]} | ${c[1]} | ${c[2]}`,1==a&&n.includes(o)){let e=buildElem("DIV","playerOpt",void 0,d);buildElem("BUTTON","playerBtn","Activate",e).addEventListener("click",function(){activate(this)}),buildElem("BUTTON","playerBtn","Release",e).addEventListener("click",function(){this.nextElementSibling.style.display="flex"});let t=buildElem("DIV","playerOptConf",void 0,e);buildElem("DIV","playerRelConf","Are You Sure?",t);let a=buildElem("BUTTON","playerBtn","Yes",t);a.classList.add("relBtn"),a.addEventListener("click",function(){release(this)});let l=buildElem("BUTTON","playerBtn","No",t);l.classList.add("relBtn"),l.addEventListener("click",function(){this.parentElement.style.display="none"})}1==a&&(r.setAttribute("data-num",s.num),r.setAttribute("data-fname",s.fName),r.setAttribute("data-lname",s.lName),r.setAttribute("data-pos",s.pos),r.setAttribute("data-i",o))}}}function changeFreePage(e){var t=document.getElementsByClassName("freeAgencyPage");for(let e of t)e.style.display="none";t[e].style.display="block";var a=document.getElementsByClassName("freeAgencyBtn");for(let e of a)e.style.textDecoration="none";a[e].style.textDecoration="underline"}function addTradeRow(){3!=tradeRows&&(tradeRows++,document.getElementsByClassName("makeTradeRow")[tradeRows-1].style.display="flex",document.getElementsByClassName("makeTradeRow")[tradeRows+2].style.display="flex",3==tradeRows&&(document.getElementById("addMorePlayers").classList.add("disabled"),document.getElementById("addMorePlayers").title="You can only have 3 players per team per trade"))}function minimize(){var e=document.getElementById("makeTradeCont"),t=e.offsetHeight,a=0,l=setInterval(function(){e.style.opacity=1-a/20,e.style.width=`${5*(20-a)}%`,e.style.height=`${t-t/20*a}px`,20==a?(clearInterval(l),e.style.display="none",e.style.width=null,e.style.height=`${window.innerHeight}px`,e.style.opacity=1,document.getElementById("pill").style.display="block",document.getElementById("pill").textContent=0==counteredDeal?`Trade with ${otherAbbr}`:`Counter to ${counteredDeal.from}`):a++},8)}function maximize(){var e=document.getElementById("makeTradeCont"),t=window.innerHeight,a=0;e.style.display="flex",e.style.height="0px",document.getElementById("pill").style.display="none";var l=setInterval(function(){e.style.opacity=a/20,e.style.width=`${5*a}%`,e.style.height=`${t*a/20}px`,20==a?clearInterval(l):a++},8)}function closeTrade(e){document.getElementById("makeTradeCont").style.display="none",counteredDeal=!1,resetTradeWindow()}function showTradeMaker(){if(otherAbbr){document.getElementById("pill").style.display="none",document.getElementById("makeTradeCont").style.display="flex";var e=getTeamFromAbbr(teamAbbr);document.getElementById("makeTradeTeamHalf").className="",document.getElementById("makeTradeTeamHalf").classList.add(getClassFromTeam(e)),document.getElementsByClassName("makeTradeLogo")[0].src=getLogoFromTeam(e),document.getElementsByClassName("makeTradeName")[0].textContent=e.mascot;var t=getTeamFromAbbr(otherAbbr);document.getElementById("makeTradeOppoHalf").className="",document.getElementById("makeTradeOppoHalf").classList.add(getClassFromTeam(t)),document.getElementsByClassName("makeTradeLogo")[1].src=getLogoFromTeam(t),document.getElementsByClassName("makeTradeName")[1].textContent=t.mascot}}function changeTradePlayers(e,t){if(t){var a=document.getElementsByClassName("makeTradeSelTeam")[e],l=document.getElementsByClassName("makeTradeSelOther")[e];a.value,l.value}else l=document.getElementsByClassName("makeTradeSelTeam")[e],a=document.getElementsByClassName("makeTradeSelOther")[e],l.value,a.value;var n=a.children[a.selectedIndex].getAttribute("data-pos");if(n!=l.children[l.selectedIndex].getAttribute("data-pos")){let e=!1;for(let t of l.children)t.getAttribute("data-pos")!=n||e?t.selected=!1:(t.selected=!0,e=!0)}var o=!1,s=["NP0","NP1","NP2"],r=document.getElementById("proposeTradeBtn");for(let e of document.getElementsByClassName("makeTradeSel"))if(!s.includes(e.value)){o=!0;break}var d=!1,i=[],m=[];for(let e of document.getElementsByClassName("makeTradeSelTeam"))i.push(e.value);for(let e of document.getElementsByClassName("makeTradeSelOther"))m.push(e.value);new Set(i).size===i.length&&new Set(m).size===m.length||(d=!0),d?(r.classList.add("disabled"),r.title="You cannot have a player listed twice",dealViable=!1):o?(r.classList.remove("disabled"),r.title="",dealViable=!0):(r.classList.add("disabled"),r.title="You must choose a player to trade",dealViable=!1)}function showProposalConfirm(){dealViable&&(document.getElementById("confirmProposal").style.display="flex")}function resetTradeWindow(){for(let e of document.getElementsByClassName("makeTradeSel"))e.selectedIndex=0;for(let e of document.getElementsByClassName("makeTradeRow"))e.style.display="none";tradeRows=0}function changePlayCalls(e,t){var a=!1;for(let e of document.getElementsByClassName("saveBtn"))if(!e.classList.contains("disabled")){a=!0;break}if(!a||e.classList.contains("disabled"))return;var l=[];for(let e of document.getElementsByClassName("sliderCont"))l.push(Number(e.children[1].value)/100);e.textContent="Saving";let n={method:"changePlayCalls",calls:l,token:getCookie("token"),i:t};ws.send(JSON.stringify(n))}function activate(e){let t=e.parentElement.parentElement.parentElement.getAttribute("data-num"),a={method:"activateFromFlex",token:getCookie("token"),num:t};ws.send(JSON.stringify(a))}function release(e){let t=e.parentElement.parentElement.parentElement.parentElement.getAttribute("data-num"),a={method:"releaseFromFlex",token:getCookie("token"),num:t};ws.send(JSON.stringify(a))}function claim(e){if(e.classList.contains("disabled"))return;var t=e.parentElement.parentElement.getAttribute("data-num");let a={method:"claimFromAgency",token:getCookie("token"),num:t};ws.send(JSON.stringify(a))}function proposeTrade(){var e={method:"proposeTrade",from:teamAbbr,to:otherAbbr,token:getCookie("token")},t=[],a=[],l=["NP0","NP1","NP2"];for(let e of document.getElementsByClassName("makeTradeSelTeam"))e.value&&!l.includes(e.value)&&t.push(e.value);for(let e of document.getElementsByClassName("makeTradeSelOther"))e.value&&!l.includes(e.value)&&a.push(e.value);0!=t.length&&0!=a.length&&t.length==a.length&&(document.getElementById("confirmProposal").style.display="none",e.fromPlayers=t,e.toPlayers=a,0!=counteredDeal&&(e.counter=!0,e.id=counteredDeal.id),ws.send(JSON.stringify(e)))}function renderTrade(e){var t=document.createElement("DIV");t.setAttribute("data-id",e.id),t.classList.add("tradeBox"),document.getElementById("tradeCont").prepend(t);var a=buildElem("DIV","tradeTop",void 0,t);buildElem("DIV","tradeStatus",e.status.toUpperCase(),a).classList.add(e.status.toLowerCase());var l=buildElem("DIV","tradeInfo",void 0,a);buildElem("DIV","tradeMeta",`${e.date} ${e.month} ${e.year} ${e.time}`,l),buildElem("DIV","tradeMeta",`${e.from} & ${e.to}`,l);var n=buildElem("DIV","tradeTopAbs",void 0,a),o=buildSVG("M19,13H5V11H19V13Z","tradeTopOpt","Toggle",n,!0);o.addEventListener("click",function(){toggle(this)}),o.setAttribute("data-hidden","false"),buildSVG("M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z","tradeTopOpt","Hide",n,!0).addEventListener("click",function(){hide(this)});var s=buildElem("DIV","tradeLower",void 0,t);for(let t of["from","to"]){let a=getTeamFromAbbr(e[t]),l=buildElem("DIV","tradeLowerHalf",void 0,s);l.classList.add(getClassFromTeam(a));let n=buildElem("DIV","tradeLowerTop",void 0,l);if("from"==t){buildElem("IMG","tradeTeamLogo",void 0,n).src=getLogoFromTeam(a);buildElem("DIV","tradeTeamName",a.mascot,n);buildElem("DIV","tradeClarify",`${a.mascot} give & ${getTeamFromAbbr(e.to).mascot} get`,l)}else{buildElem("DIV","tradeTeamName",a.mascot,n).style.textAlign="right",buildElem("IMG","tradeTeamLogo",void 0,n).src=getLogoFromTeam(a),buildElem("DIV","tradeClarify",`${a.mascot} give & ${getTeamFromAbbr(e.from).mascot} get`,l)}for(let a of e[`${t}Players`]){let e=buildElem("DIV","tradeRow",void 0,l);buildElem("DIV","tradePos",a.pos.toUpperCase(),e),buildElem("DIV","tradeRowName",void 0,e).innerHTML=`${a.fName} ${a.lName} <span class="playerNum">#${a.num}</span>`}}var r=buildElem("DIV","tradeBottom",void 0,t);if(r.setAttribute("data-id",e.id),r.setAttribute("data-to",e.to),r.setAttribute("data-from",e.from),r.setAttribute("data-toplayers",JSON.stringify(e.toPlayers)),r.setAttribute("data-fromplayers",JSON.stringify(e.fromPlayers)),"countered"==e.status)buildElem("DIV","tradeCounter","This trade was countered. Counter is somewhere above.",t);else if(e.from==teamAbbr&&"proposed"==e.status){let e=buildElem("BUTTON","tradeBtn","Retract",r);e.classList.add("retracted"),e.addEventListener("click",function(){retract(this)})}else if("proposed"==e.status||"counterproposal"==e.status){let e=buildElem("BUTTON","tradeBtn","Accept",r);e.classList.add("accepted","defOpt"),e.addEventListener("click",function(){show(this)});let t=buildElem("BUTTON","tradeBtn","Counter",r);t.classList.add("countered","defOpt"),t.style.marginLeft="5px",t.addEventListener("click",function(){counter(this)});let a=buildElem("BUTTON","tradeBtn","Decline",r);a.classList.add("declined","defOpt"),a.style.marginLeft="5px",a.addEventListener("click",function(){decline(this)});let l=buildElem("BUTTON","tradeBtn","Cancel",r);l.classList.add("cancel","confOpt"),l.addEventListener("click",function(){cancel(this)});let n=buildElem("BUTTON","tradeBtn","Confirm",r);n.classList.add("accepted","confOpt"),n.style.marginLeft="5px",n.addEventListener("click",function(){accept(this)})}}function updateTrade(e){var t;for(let a of document.getElementsByClassName("tradeBox"))if(a.getAttribute("data-id")==e.id){t=a;break}t.children[0].children[0].textContent=e.newStatus.toUpperCase(),t.children[0].children[0].classList.add(e.newStatus),t.children[2].remove(),"countered"==e.newStatus&&buildElem("DIV","tradeCounter","This trade was countered. Counter is somewhere above.",t)}function retract(e){var t=e.parentElement.getAttribute("data-id"),a={method:"retractTrade",token:getCookie("token"),id:t};ws.send(JSON.stringify(a))}function decline(e){var t=e.parentElement.getAttribute("data-id"),a={method:"declineTrade",token:getCookie("token"),id:t};ws.send(JSON.stringify(a))}function counter(e){var t=e.parentElement.getAttribute("data-id"),a=e.parentElement.getAttribute("data-to"),l=e.parentElement.getAttribute("data-from");counteredDeal={id:t,to:a,from:l},changePage(1),document.getElementById("rosterSel").value=l,otherAbbr=l,getRoster(),resetTradeWindow(),showTradeMaker();var n=JSON.parse(e.parentElement.getAttribute("data-toplayers")),o=JSON.parse(e.parentElement.getAttribute("data-fromplayers"));counterOther=o;for(let e=0;e<n.length;e++)document.getElementsByClassName("makeTradeSelOther")[e].parentElement.parentElement.style.display="flex",tradeRows++;for(let e=0;e<n.length;e++){let t=document.getElementsByClassName("makeTradeSelTeam")[e];t.value=n[e].num,t.parentElement.parentElement.style.display="flex"}}function toggle(e){if("false"==e.getAttribute("data-hidden")){var t="none",a="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";e.setAttribute("data-hidden","true")}else{t="flex",a="M19,13H5V11H19V13Z";e.setAttribute("data-hidden","false")}var l=e.parentElement.parentElement.parentElement;l.children[1].style.display=t,l.children[2]&&(l.children[2].style.display=t),e.children[0].setAttribute("d",a)}function hide(e){var t=e.parentElement.parentElement.parentElement.getAttribute("data-id");console.log(t);var a={method:"hideTrade",token:getCookie("token"),id:t};ws.send(JSON.stringify(a))}function show(e){var t=e.parentElement,a=["none","none","none","block","block"];for(let e=0;e<t.children.length;e++)t.children[e].style.display=a[e]}function cancel(e){var t=e.parentElement,a=["block","block","block","none","none"];for(let e=0;e<t.children.length;e++)t.children[e].style.display=a[e]}function accept(e){var t=e.parentElement.getAttribute("data-id"),a={method:"acceptTrade",token:getCookie("token"),id:t};ws.send(JSON.stringify(a))}function signOut(){let e={method:"signOut",token:getCookie("token")};return ws.send(JSON.stringify(e)),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC;",document.cookie="board=; expires=Thu, 01 Jan 1970 00:00:00 UTC;",location.reload(),!1}function univSignOut(){let e={method:"univSignOut",token:getCookie("token")};ws.send(JSON.stringify(e))}function confirmPass(){let e={method:"confirmPass",token:getCookie("token"),password:document.getElementById("currPass").value};ws.send(JSON.stringify(e))}function changePass(){let e=document.getElementById("newPass1").value,t=document.getElementById("newPass2").value;if(e.length<12)return void(document.getElementById("passTxt").textContent="Password must be at least 12 characters");if(e!=t)return void(document.getElementById("passTxt").textContent="Passwords must match");let a={method:"changePass",token:getCookie("token"),password:e,temp:temp};ws.send(JSON.stringify(a))}function enableFact(){ws.send(JSON.stringify({method:"enable2fa",token:getCookie("token")}))}function checkFact(e){if(6==e.length){let t={method:"verify2fa",token:getCookie("token"),code:e};ws.send(JSON.stringify(t))}}function getEmailCode(){var e=document.getElementById("emailInp").value;if(validateEmail(e)){let t={method:"emailValidate",email:e,token:getCookie("token")};ws.send(JSON.stringify(t))}else document.getElementById("eTxt").textContent="Email is not valid"}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function checkECode(e){if(6==e.length){let t={method:"veriCode",token:getCookie("token"),code:e};ws.send(JSON.stringify(t))}}function fakeSett(e){document.getElementById("eTxt").textContent=e?"This is not an actual setting (Also, why would you select this?)":""}function changeRecovery(e,t){let a={method:"recoMethod",token:getCookie("token"),from:e,to:t};ws.send(JSON.stringify(a))}function enableUpdates(e){let t={method:"enableUpdates",token:getCookie("token"),x:e};ws.send(JSON.stringify(t))}ws.onmessage=(e=>{const t=JSON.parse(e.data);if(console.log(t),"requested"==t.method)"roster"==t.type&&renderOppoRoster(t.data,t.crit);else if("signOut"==t.method)signOut();else if("confirmed"==t.method)temp=t.temp,document.getElementById("confirmPass").style.display="none",document.getElementById("changePass").style.display="block";else if("passChanged"==t.method)document.getElementById("passTxt").textContent="Password changed";else if("error"==t.method){if("505"==t.type)return location.reload(),!1;if("changePass"==t.type||"confirmPass"==t.type)document.getElementById("passTxt").textContent=t.mess;else if("enable2fa"==t.type||"verify2fa"==t.type)document.getElementById("factTxt").textContent=t.mess;else if("emailValidate"==t.type||"veriCode"==t.type||"enableUpdates"==t.type)document.getElementById("eTxt").textContent=t.mess,t.success&&(document.getElementById("emailOpt1").style.display="block",document.getElementById("emailOpt2").style.display="block",document.getElementById("emailReco").checked=!0,document.getElementById("factReco").checked=!1);else if("recoMethod"==t.type)document.getElementById("recTxt").textContent=t.mess,document.getElementById(t.to+"Reco").checked=!1,"fact"==t.to&&1==t.email?document.getElementById("emailReco").checked=!0:"email"==t.to&&1==t.fact&&(document.getElementById("factReco").checked=!0);else if("changePlayCalls"==t.type){let e=document.getElementsByClassName("saveBtn");for(let t of e)t.classList.add("disabled"),t.textContent="Save Changes";error(t.mess)}else error(t.mess)}else if("qr"==t.method)document.getElementById("appTxt").style.display="block",document.getElementById("qr").src=t.data,document.getElementById("qr").style.display="block",document.getElementById("enterTxt").style.display="block",document.getElementById("factCode").style.display="block";else if("emailSent"==t.method)document.getElementById("eTxt").textContent="You have two minutes to enter the code sent to your email",document.getElementById("emailEnter").style.display="block",document.getElementById("veriEmail").textContent="Send New Code";else if("newMethod"==t.method)console.log(t.to,t.from),document.getElementById(t.to+"Reco").checked=!0,document.getElementById(t.from+"Reco").checked=!1,document.getElementById("recTxt").textContent="Recovery method updated";else if("activatedFromFlex"==t.method||"releasedFromFlex"==t.method||"claimedFromAgency"==t.method){if(renderPlayerRows(t.roster,document.getElementById("rosterHalfTeam"),!0),0==t.open){for(let e of document.getElementsByClassName("freeAgencySign"))if(!e.classList.contains("disabled")){e.classList.add("disabled");let t=document.createElementNS("http://www.w3.org/2000/svg","title");t.textContent="You Do Not Have An Open Slot To Sign This Player",e.append(t)}}else if(1==t.open){document.querySelectorAll(".freeAgencySign title").forEach(function(e){"Player Not Yet Available"!=e.textContent&&(e.parentElement.classList.remove("disabled"),e.remove())})}if(t.num){let e=document.getElementsByClassName("freeAgencyTable")[Number(t.num.substring(0,1))];for(let a of e.rows)if(a.getAttribute("data-num")==t.num){a.remove();break}}}else if("acceptedTrade"==t.method)renderPlayerRows(t.roster,document.getElementById("rosterHalfTeam"),!0),t.mess&&error(t.mess);else if("proposedTrade"==t.method)resetTradeWindow(),renderTrade(t.trade),t.trade.from==teamAbbr?(document.getElementById("makeTradeCont").style.display="none",changePage(2)):error("You have a new trade deal!"),counteredDeal=!1;else if("updateTrade"==t.method)updateTrade(t);else if("hiddenTrade"==t.method){for(let e of document.getElementsByClassName("tradeBox"))if(e.getAttribute("data-id")==t.id)return void e.remove()}else"changedPlayCalls"==t.method&&(playCalls[0]=t.calls.slice(0,4),playCalls[1]=t.calls.slice(4,8),document.getElementsByClassName("saveBtn")[t.i].textContent="Saved",setTimeout(()=>{document.getElementsByClassName("saveBtn")[t.i].textContent="Save Changes",document.getElementsByClassName("saveBtn")[t.i].classList.add("disabled")},2e3))});
